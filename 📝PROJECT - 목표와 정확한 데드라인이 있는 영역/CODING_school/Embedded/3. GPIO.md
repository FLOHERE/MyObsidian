# GPIO란?
- 볌용 입출력 핀(General Purpose In/Out)
1. 마이크로 컨트롤러 칩의 핀 대다수는 환경설정 가능한 입력, 출력 라인을 나타냄
2. 각 핀은 디지털 출력임. 
	1. 핀의 전압 조절 -> 로직 수준 나타냄
	2. 디지털 입력 -> 전압 비교 -> 로직 상태 감지
3. 일부 핀은 함수를 대체하기 위해 연결 될수도 있다.
	- 기본 GPIO 기능 외에 UART, PWM의 기능을 사용할 수 있다.
4. 핀은 여러 환경 설정을 가질수 있음
   but 한번에 하나만 활성화 가능
5. GPIO 컨트롤러 : 모든 핀에 대한 환경설정 가능
	- 대체 기능이 사용중일때 하위 시스템과 핀의 연결을 관리함

# GPIO를 다루기 위해 알아야 하는것.
- 마이크로 컨트롤러의 핀 정보(specification)
- 핀의 환경 설정
- GPIO 컨트롤러

- 마이크로 컨트롤러의 공식 기술 문서 확인
	1. 데이터 시트 : 각종 핀의 정보가 담겨있다.
	2. 참고용 메뉴얼 : 보드의 구조, 사용법 등이 나타나있다.
	3. 프로그래밍 가이드

# 핀의 입출력 방향 제어
- 패드(pad) : 패키지의 핀과 연결되는 반도체의 일부분
- 제어용 신호들의 값은 주로 MSCR에서 결정됨
	- MSCR : MCU의 각 핀의 전기적 특성 기능을 설정하기 위한 레지스터
		- 핀의 입출력 방향, 풀업/풀다운 등 제어

# 핀 용도 선택
- Signal Multiplexing : 하나의 패드가 여러 기능을 공유 할 수 있도록 하는 역할
	- 하나의 물리적 핀을 여러 기능이 공유 가능하다는 뜻
	- ex_) 하나의 핀에 GPIO, UART, SPI,,,,이런식으로 지정해서 해당 역할로만 쓴다.

# S32K312의 GPIO 컨트롤러
- SIUL2(System Integration Unit Lite 2)가 담당
- SIUL2 내에 MSCR, IMCR 레지스터가 GPIO 핀 용도 지정에 사용
	- MSCR(Multiplexed Signal Configuration Register) : 핀의 외부로 나가는 출력 선택
	- IMCR(Input Mux Configuration Register) : 모듈이 외부 신호를 받는 입력 선택
		- UART, CAN 등의 입력이 어디서 들어올지 설정
- MSCR 동작 방식
	1. GPIO, UART, eMIOS가
	2. Mux로 모여 여러 신호중 하나를 선택 
	3. 패드로 출력(하나의 물리적 패드 공유, 동시 X)
		- 하나만 선택해서 외부로 출력
- IMCR 동작 방식
	1. 여러 패드중 하나를 Mux에서 선택
	2. EIRQ로 이동
		- EIRQ : 일종의 모듈, 내부 모듈 입력으로 전달한다.
			- 여러개의 물리적 패드 중 하나에서 신호를 받음

# 레지스터란..?
: CPU 내부에서 특별한 용도가 있는 데이터를 저장하는 곳
- 매우 빠른 속도의 작은 메모리 공간
- 초기 : 주소 대신 이름 사용
	- 지금은 주소를 사용하기도 한다.

## 레지스터 설정 방법

```Assembly
LDR       r0, =0x12345678
MOVS    r1, #1
STR       r1, [r0]
```

```C
unsigned int *p = 0x12345678;
*p = 1;
```

- bit1, 0만 수정하기 : 비트 연산자 사용

# SIUL2
- 핀 제어를 담당하는 IP module
	- IP Module : NXP 마이크로 컨이트롤러에서 실제로 구현된 IP를 지칭
		- Instance라고 하기도 함

# MSCR, ICMR 내부 구조
- 각 핀마다 한개의 MSCR, ICMR이 사용됨(여기서는 145개)
- ICMR은 SSS_0~3만 사용됨
- SSS_0~SSS_3 : 핀과 연결될 내부 모듈 선택, 앞의 그림에서 Mux 제어 신호
	- 0000 : GPIO
	- 0001~1111 : 핀마다 다르다. 

# MSCR 레지스터 값 설정 방법
- 레지스터의 값을 바꾼다 = 레지스터에 값을 쓴다.
- MSCR레지스터는 주소로 접근한다.

# 핀 입출력 데이터 값 결정법
- 출력 데이터 : GPDO(GPIO Pad Data Output)레지스터
- 입력 데이터 : GPDI(GPIO Pad Data Input) 레지스터

# LED를 파란색으로 만들기
- 작업 순서
	1. MSCR 설정-> Pin 39를 GPIO output으로 지정
	2. GPDO를 설정 -> GPIO[31]의 값을 1로 지정
- 항상 레지스터의 초기값을 확인하자
- 레지스터 설정 : 레지스터의 주소를 알아야 함.