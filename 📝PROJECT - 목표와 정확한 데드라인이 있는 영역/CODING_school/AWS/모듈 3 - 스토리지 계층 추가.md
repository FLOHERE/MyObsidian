# 섹션 1 : 가장 간단한 아키텍쳐
- 정적 웹사이트를 만들자!

# 섹션 2 : Amazon S3 사용
## Amazon S3 (Simple Storage Service)
- 객체 스토리지 서비스
	- 대량의 비정형 데이터 -> 무제한 저장
	- 데이터 파일이 사용자가 정의한 버킷에 객체로 저장됨
		- 버킷 : 데이터 파일을 객체 형태로 저장하는곳(버킷 이름은 모든 AWS고객 계정에서 고유해야 함)
	- 단일 객체의 최대 파일 크기 : 5TB
	- 모든 객체에는 REST 액세스 가능한 전역 고유 URL(범용 네임 스페이스)가 있음
	- 모든 객체에는 키, 버전 ID, 값, 메타데이터, 하위 리소스 있음
- 특징
	1. 키 : 객체에 할당하는 이름
		- 객체를 검색할 수 있다.
		- 버킷 루트에 대한 상대적인 전체 경로가 포함됨
	2. 객체의 값 : 실제 컨텐츠
		- 수정 불가 -> 외부에서 변경 후 객체 재 업로드 필요
	3. 메타데이터 : 사용자가 정의 할 수 있는 사용자 정의 메타데이터가 있음
	4. 하위 리소스 : 추가적인 객체별 정보 저장 가능

>[!note] 메타데이터란?
>데이터에 대한 데이터로, 데이터를 설명하거나 관리하기 위한 정보

## Amazon S3의 이점
1. 내구성 : 데이터가 손실 되지 않도록 보장(99.999% 내구성)
	1. 여러 시설에서 여러 디바이스에 객체 중복 저장
	2. 중복 손실 방지 + 복구 = 여러 디바이스에 동시 장애 발생 방지
2. 가용성 : 필요 할때 데이터에 빠르게 엑세스 할 수 있음(99% 가용성)
3. 확장성 : 사실상 무제한의 용량 제공(5TB 이하의 모든 단일 객체)
	- 데이터 접근 제어 방법으로 보안까지 좋음
4. 보안 : 세분화된 액세스 제어 기능 제공
5. 성능 : 다양한 디자인 패턴에서 지원됨. 밀리초 단위의 첫 바이트 지연 시간 제공 -> 성능 좋음
	- 일반적인 데티터 접근 방식
		1. 캐싱
		2. 단기간에 요청 트래픽이 몰려도 수신 객체에 대한 재시도 및 초과 로직
			- 요청을 보냈는데 응답 없으면 재시도, 시간이 너무 오래 걸리면 중단 한다.
		3. 수평 확장 + 요청 병렬 처리 -> 네트워크 전반에서 처리량을 높임

## 사용 사례
### 1. 웹 컨텐츠 및 미디어 저장 및 배포
- 동영상, 사진 등 업로드 및 다운로드를 호스팅(미디어 호스팅) 하는 중복 방식의 확장 가능하고 가용성 높은 인프라 구축
- 각 객체에 고유한 HTTP URL이 있어 Amazon S3에서 직접 전송함
- 수요의 급증 해결을 위해 대역폭이 필요한 웹 컨텐츠 호스팅에 적합
- Amazon Cloud Front : 컨텐츠 전송 네트워크의 오리진 스토어 역할(컨텐츠의 원본을 저장)
	- 컨텐츠 전송 네트워크(CDN) : 사용자에게 컨텐츠(이미지, 동영상 등)을 빠르게 전달하기 위해 전 세계에 캐시 서버를 분산 배치한 시스템
		- ex_) 사용자가 서울 근처면 서울 근처 CDN에서 서버 컨텐츠를 받음
	- 프로비저닝 : 서버를 생성하고 OS, 네트워크 등 설정 세팅
		- 시스템 동작에 필요한 것들을 준비하는 과정

#### 버킷 및 객체 보안
- 새로 생성된 S3버킷과 객체는 비공개, 보호됨
- <사용 사례> : S3에서 데이터를 공유해야 하는 경우
	- 데이터 엑세스 관리 및 제어
	- 최소 권한 원칙을 따름
- 데이터 엑세스 제어를 위한 도구 및 옵션
	1. 퍼블릭 액세스 차단 기능 : 새 버킷에 대해 기본적으로 활성화됨, 관리 쉬움
		- 데이터의 의도치 않은 노출을 간단하게 방지
	2. IAM 정책 : 사용자가 IAM 사용 -> 인증
		- 특정 버킷 및 객체에 액세스 할 수 있는 사용자 또는 역할을 지정
	3. 버킷 정책 : 특정 객체 또는 버킷에 대한 액세스 정의 가능
		1. IAM을 사용하여 인증 할 수 없는 경우에 사용
		2. AWS계정에 액세스 권한 부여 OR 데이터에 대한 퍼블릭 또는 익명 엑세스 권한 부여 -> 버킷 정책 구성
		3. 사용자에게 연결된 자격 증명 기반 정책(권한, 역할 같은거)에서 부여한 권한이 있는 사용자의 경우에도 액세스 제한됨
	4. ACL(액세스 제어 목록) : 래거시 액세스 제어 매커니즘
	5. S3액세스 포인트 : 각 애플리케이션에 특정한 이름 및 권한 사용 -> 액세스 구성
		1. 사용자마다 권한 설정을 맞춤형으로 커스텀하여 S3 버킷에 접근 가능하다는 뜻
	6. 미리 성명된 URL : 임시 URL사용 -> 다른 사용자에게 시간이 제한된 액세스 권한 부여 가능
	7. AWS Trusted Advisor : 버킷 권한 확인 (무료로 제공되는 기능)

#### 액세스 구성을 위한 세가지 일반적인 접근 방식
- 버킷 및 객체의 사용 사례에 적합한 보안 설정을 구성


![[Pasted image 20251020112033.png]]

1. 기본 보안 설정 : 새로 생성, 수정되지 않은 버킷에 액세스 할 수 있는것은 계정 관리자와 AWS 계정 루트 사용자 뿐.
	- 리소스 소유자 -> 다른 사용자에게 특정 액세스 권한 부여 가능
	  but! 해당 권한이 부여되지 않은 사용자는 접근 불가
2. 퍼블릭 액세스 보안 설정 : 보안 설정 비활성화, 누구나 버킷에 저장된 객체에 공개적으로 접근 가능
	1. 웬만하면 쓰지 마라
3. 보안 설정에 적용되는 액세스 정책 : 제어된 액세스 제공

#### 객체 암호화 고려

>[!note] 인코딩과 디코딩
>- 인코딩 : 데이터를 전송 가능한 형태로 변환
>- 디코딩 : 원래 데이터 형태로 읽을 수 있도록 복원

- 암호화는 읽을 수 없는 보안 키로 데이터를 인코딩
	- 보안키가 있어야 데이터 디코딩 가능
	- AWS Key Management Service(AWS KMS) 사용하여 보안 키 관리
- 서버측 암호화
	- 기본 암호화 옵션
	- 객체를 디스크에 저장 전 암호화, 사용자가 객체를 다운할때 해당 객체 복호화 함
- 클라이언트 측 암호화 
	- 클라이언트 측 데이터를 암호화 -> 암호화 된 데이터를 S3에 업로드
	- 사용자가 암호화 프로세스 관리
- 데이터를 암호화 하는 방법(2가지)
	1. 기본 암호화 옵션(서버측 암호화)
		1. 서버측 암호화 활성화
		2. S3가 객체 저장 전 암호화
		3. 객체 다운로드시 복호화
	2. 클라이언트 측 암호화
		1. 클라이언트측 암호 활성화(사용자가 암호화 프로세스, 키 등 관리)
		2. 키로 데이터 암호화(데이터 저장과는 다른 방식)

### 2. 정적 웹사이트 호스팅
- HTML, 파일, 이미지, 동영상 및 클라이언트 측 스크립트를 포함한 정적 컨텐츠 지원
